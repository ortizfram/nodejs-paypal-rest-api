<!-- adminUsers.ejs -->

<!DOCTYPE html>
<html>

<head>
  <title>Admin Panel - Users</title>
  <link rel="stylesheet" href="/css/alert.css">
  <link rel="stylesheet" href="/css/navbar.css">
</head>

<body>
  <div class="navigation">
    <%- include ('navbar') -%>
      <%- include ('alert') -%>
  </div>

  <div class="section-title">
    <h1>Admin Panel - Users</h1>
  </div>

  <div class="searchbar">
    <!-- Add a search input field -->
    <form action="/api/admin/users" method="GET">
      <label for="search">Search: </label>
      <input type="text" id="search" name="search" placeholder="Search users">
      <button type="submit">Search</button>
    </form>
  </div>

  <table class="users-table">
    <thead class="table-headers">
      <tr>
        <th>Username</th>
        <th></th>
        <th>Name</th>
        <th></th>
        <th>Email</th>
        <th></th>
        <th>Role</th>
        <!-- Add more columns as needed -->
      </tr>
    </thead>
    <tbody class="table-rows">
      <% users.forEach(user=> { %>
        <tr>
          <td>
            <%= user.username %>
          </td>
          <td></td>
          <td>
            <%= user.name %>
          </td>
          <td></td>
          <td>
            <%= user.email %>
          </td>
          <td></td>
          <!-- <td>
            <%= user.role %>
          </td> -->
          <td class="change-role"> <!-- Modified this line -->
            <!-- Button to change user role -->
            <form action="/api/admin/users/change-role" method="POST">
              <input type="hidden" name="userEmail" value="<%= user.email %>">
              <select name="newRole" onchange="this.form.submit()"> <!-- Changed here -->
                <option value="user" <% if (user.role === 'user') { %> selected <% } %>>User</option>
                <option value="admin" <% if (user.role === 'admin') { %> selected <% } %>>Admin</option>
                <option value="staff" <% if (user.role === 'staff') { %> selected <% } %>>Staff</option>
                <!-- Add more roles if needed -->
              </select>
            </form>
          </td>
          <!-- Display more user information -->
        </tr>
        <% }); %>
    </tbody>
  </table>
</body>

</html>